<app-header></app-header>
<nav>
    <ul>
        <li>
            <a [routerLink]="['/dashboard']">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-columns-gap" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M6 1H1v3h5V1zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1zm14 12h-5v3h5v-3zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-5zM6 8H1v7h5V8zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H1zm14-6h-5v7h5V1zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1h-5z" />
                </svg><span style="margin-left: 5%;">Dashboard</span></a></li>
        <li><a (click)="manageBooks()">
                <!--[routerLink]="['/book']"-->
                <i class="fa fa-book" aria-hidden="true" style="margin-top: 3px;"></i>
                <span style="margin-left: 6%;">Book</span>
                <span (click)="approve()" *ngIf="userRole == 'SuperLibrarian'"
                    style="margin-left: 6%;background-color: blue;margin-bottom: 2%;"
                    class="badge list">{{count}}</span>

            </a>
        </li>

        <li *ngIf="userRole == 'SuperLibrarian' || userRole == 'Admin'">
            <a [routerLink]="['/feedback']">
                <i class="fa fa-comment" aria-hidden="true"></i>
                <span style="margin-left: 4%;">Feedback</span>
                <span (click)="showFeedbacks()"
                    style="margin-left: 6%;background-color: blue;margin-bottom: 2%;"
                    class="badge list">{{feedbackCount}}</span>
            </a>
        </li>

        <li>
            <a [routerLink]="['/userList']">
                <i class="fa fa-users" aria-hidden="true"></i>
                <span style="margin-left: 4%;">User Management</span>
            </a>
        </li>
        <li>
            <a [routerLink]="['/changeStatus']" *ngIf="userRole == 'Admin' || userRole == 'SuperLibrarian'">
                <i class="fa fa-users" aria-hidden="true"></i>
                <span style="margin-left: 4%;">New User Approval</span>
                <span style="margin-left: 6%;background-color: blue;margin-bottom: 2%;" class="badge list">{{count_user}}</span>
            </a>
        </li>
        <li>
            <a [routerLink]="['/user-upload']">
                <i class="fa fa-users" aria-hidden="true"></i>
                <span style="margin-left: 4%;">User Upload</span>
            </a>
        </li>
        <li>
            <a (click)="goSetup('lov1')" *ngIf="userRole == 'Admin' || userRole == 'SuperLibrarian'">

                <i class="fa fa-university" style="font-size:15px"></i>
                <span style="margin-left: 4%;">Department Setup</span>
            </a>
        </li>
        <li>
            <a (click)="goSetup('lov3')" *ngIf="userRole == 'Admin' || userRole == 'SuperLibrarian'">

                <i class="fa fa-university" style="font-size:15px"></i>
                <span style="margin-left: 4%;">Constituency Setup</span>
            </a>
        </li>
        <li>
            <a (click)="goSetup('lov2')" *ngIf="userRole == 'Admin' || userRole == 'SuperLibrarian'">
                <i class="fa fa-university" style="font-size:15px"></i>
                <span style="margin-left: 4%;">Position Setup</span>
            </a>
        </li>
        <li>
            <a [routerLink]="['/changePwd2']">
                <i class="fa fa-cog" aria-hidden="true" style="font-size:15px"></i>
                <span style="margin-left: 4%;">Change Password</span>
            </a>
        </li>
        <li>
            <a (click)="goLogout()">
                <i class="glyphicon glyphicon-log-out"></i>
                <span style="margin-left: 4%;">Logout</span>
            </a>
        </li>
    </ul>
</nav>

<div class="content" *ngIf="showBook">
    <mat-form-field style="margin-left: 3%;width: 50%;margin-top: 2%;width: 30%;">
        <mat-label> Book</mat-label>
        <input matInput placeholder="Search Here" [(ngModel)]="term">
    </mat-form-field>
    <br>

    <div style="margin-left: 5%;height: 300px; width:90%;overflow-y: auto;overflow-x:auto;">
        <table class="table table-striped table-condensed table-hover tblborder">

            <thead>
                <tr>
                    <td style="color:blue;font-weight: bold;" colspan="12">Book List</td>
                </tr>
                <tr>
                    <th style="width: 5%;text-align: left;">Edit</th>
                    <th style="width: 10%;text-align: left;">BookTitle </th>
                    <th style="width: 10%;text-align: left;">Accession No</th>
                    <th style="width: 10%;text-align: left;">State</th>
                    <th style="width: 10%;text-align: left;">Created Date</th>
                    <th style="width: 10%;text-align: left;">Size</th>
                    <th style="width: 10%;text-align: left;">Download Approval</th>
                    <th style="width: 10%;text-align: left;color: black;">
                        <button type="button"  style="margin-left: 20px;" class="btn btn-primary" (click)="approveBooks()">Approve</button>
                    </th>
                    <th style="width: 5%;text-align: left;">Delete</th>
                </tr>

            </thead>
            <div *ngIf="loading" style="margin-left: 25%;" class="lds-default"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>

            <tbody>
                <tr *ngFor="let obj of books | filter:term">
                    <td style="width: 5%;text-align: left;">
                        <i style="margin-left:12%" value="{{obj.boId}}" [routerLink]="['/editbook/', obj.boId]"
                            class="fa fa-pencil-square-o" aria-hidden="true"></i>

                    </td>
                    <td at-implicit at-sortable at-attribute style="width: 10%;text-align: left;">{{obj.title}}</td>
                    <td style="width: 10%;text-align: left;">{{obj.callNo}}</td>
                    <td style="color: blue;" style="width: 10%;text-align: left;">{{obj.state}}</td>
                    <td style="width: 10%;text-align: left;"> {{obj.createdDate}}</td>
                    <td style="width: 10%;text-align: left;">{{obj.size}}</td>

                    <td style="width: 10%;text-align: left;">
                        <input style="text-align: center; display: inline;" onclick="return false;" type="checkbox"
                            [(ngModel)]="obj.downloadApproval">

                    </td>

                    <td style="width: 10%;text-align: center;">
                        <input style="text-align: center; display: inline;" type="checkbox" value="{{obj.boId}}"
                            (change)="onCheckboxSelection($event)">

                    </td>

                    <td style="width: 5%;text-align: center;">
                        <i style="margin-left:12%" value="{{obj.boId}}" (click)="deleteBook($event)" class="fa fa-trash"
                            aria-hidden="true"></i>

                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>